{"version":3,"file":"z-sails.min.js","sources":["z-sails.js"],"names":[],"mappings":"CAIA,SAAA,GAEA,EAAA,SAAA,UAAA,WACA,GAAA,GAAA,IACA,GAAA,cAAA,EACA,EAAA,aAAA,EAEA,KAAA,KAAA,WACA,OACA,aAAA,EAAA,aACA,YAAA,EAAA,iBAIA,EAAA,QAAA,WAAA,SAAA,GAGA,EAAA,UAAA,gBAAA,YAAA,WAAA,SAAA,UAAA,SAAA,EAAA,EAAA,EAAA,GACA,GAAA,GAAA,SAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GACA,EAAA,+BACA,EAAA,GAAA,EAAA,KAEA,IAAA,EACA,GAAA,eACA,EAAA,QAAA,UAAA,GAEA,IAAA,GAAA,QAAA,UAAA,EACA,OAAA,QAAA,GAAA,SAAA,GAAA,QAAA,GAAA,WAAA,GACA,EAAA,cAAA,EAAA,OAAA,IAAA,KAAA,EAAA,EAAA,OAAA,IAAA,KAAA,EAAA,EAAA,OAAA,IAEA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,OAIA,GAAA,GAAA,OAAA,GAAA,EAAA,QAAA,SAAA,GAAA,SAAA,EAAA,GACA,EAAA,aAAA,KAAA,EAAA,WAEA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAGA,EAAA,EAAA,WAAA,EAAA,EAAA,QAAA,MAQA,OAFA,GAAA,gBAAA,EAEA,SAKA,QAAA,OAAA","sourcesContent":["/**\r\n * Created by Zerot on 7/23/14.\r\n */\r\n\r\n(function(module){\r\n\r\n    module.provider('zSails', [function(){\r\n        var self = this;\r\n        self.useFileCheck = true;\r\n        self.useFallback = false;\r\n\r\n        this.$get = function(){\r\n            return {\r\n                useFileCheck: self.useFileCheck,\r\n                useFallback: self.useFallback\r\n            };\r\n        };\r\n    }]);\r\n    module.config(['$provide', function($provide){\r\n\r\n        // replace $httpBackend to have it put out sails socket requests instead of XHR\r\n        $provide.decorator('$httpBackend', ['$delegate', '$browser', 'zSails', '$window', function($delegate, $browser, zsails, $window){\r\n            var $httpBackend = function(method, url, post, callback, headers, timeout, withCredentials, responseType){\r\n                $browser.$$incOutstandingRequestCount();\r\n                url = url || $browser.url();\r\n\r\n                var lowercaseUrl;\r\n                if (zsails.useFileCheck)\r\n                    lowercaseUrl = angular.lowercase(url);\r\n\r\n                var methodLowercase = angular.lowercase(method);\r\n                if ((methodLowercase !== 'get' && methodLowercase !== 'post' && methodLowercase !== 'put' && methodLowercase !== 'delete') ||\r\n                    (zsails.useFileCheck && lowercaseUrl.length > 5 && (lowercaseUrl[lowercaseUrl.length-5] == '.' || lowercaseUrl[lowercaseUrl.length-4] == '.'))) //check if file. files will have a . at 3rd or 4th last character\r\n                {\r\n                    return $delegate(method, url, post, callback, headers, timeout, withCredentials, responseType);\r\n                }\r\n                else\r\n                {\r\n                    $window.io.socket[methodLowercase](url, angular.fromJson(post), function(data, jwr){\r\n                        if (zsails.useFallback && jwr.statusCode != 200)\r\n                        {\r\n                            $delegate(method, url, post, callback, headers, timeout, withCredentials, responseType);\r\n                        }\r\n                        else\r\n                            callback(jwr.statusCode, data, jwr.headers, \"\");\r\n                    });\r\n                }\r\n\r\n            };\r\n\t\t\t\r\n\t\t\t$httpBackend.originalBackend = $delegate; // expose the original backend\r\n\t\t\t\r\n            return $httpBackend;\r\n        }]);\r\n\r\n    }]);\r\n\r\n})(angular.module('z-sails', []));"],"sourceRoot":"/source/"}